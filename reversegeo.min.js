function reverseGeo(e,t,n,r){var i={};r=r||["city","postcode","country","state"];var s=function(e){switch(e){case"city":return["city","village","town"];default:return[e]}};var o=function(e){switch(e){case"city":return["locality"];case"postcode":return["postal_code"];case"state":return["administrative_area_level_1"];default:return[e]}};var u=function(n){var s=new XMLHttpRequest;s.open("GET","https://maps.googleapis.com/maps/api/geocode/json?latlng="+e+","+t,true);s.onreadystatechange=function(){if(s.readyState===4&&s.status===200){var e=JSON.parse(s.responseText);var t=e.results;for(var u=0;u<t.length;u++){for(var a=0;a<t[u].address_components.length;a++){var f=t[u].address_components[a];for(var l=0;l<r.length;l++){var c=o(r[l]);for(var h=0;h<c.length;h++){if(f.types.indexOf(c[h])!==-1){i[r[l]]=f.long_name;r.splice(l,1);break}}}}}n()}};s.send()};var a=function(n){var o=new XMLHttpRequest;var u="http://open.mapquestapi.com/nominatim/v1/reverse.php";o.open("GET",u+"/reverse?format=json&lat="+e+"&lon="+t,true);o.send();o.onreadystatechange=function(){if(o.readyState===4&&o.status===200){data=JSON.parse(o.responseText).address;for(var e=0;e<r.length;e++){var t=s(r[e]);for(var u=0;u<t.length;u++){if(data[t[u]]){i[r[e]]=data[t[u]];r.splice(e,1);break}}}n()}}};var f=0;u(function(){if(r.length===0)n(i);else a(function(){n(i)})})}
